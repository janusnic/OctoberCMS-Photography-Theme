==
<?php
function onShowContent()
{
$this['submitedCode'] = post('codeProtection');
}

function onStart()
{

$this->page->addVisible('protectionCode');

$this['hasAccess'] = false;
if(isset($_GET['protectionCode'])) {
if($_GET['protectionCode'] == sha1($this->page->protectionCode) ){
$this['hasAccess']= true;
}
}

if(empty($this->page->protectionCode)) {
$this['hasAccess']= true;
}

if(isset($_GET['error'])) {
$this['errorCode']= $_GET['error'];
}

}
?>
==


{% put page_content %}


{% if (hasAccess) %}
<div class="row">
    <div class="col-xs-12 col-md-offset-2 col-md-4">
        {% page %}
    </div>
    <div class="col-xs-12 col-md-4">
        {% placeholder right_column %}
    </div>
</div>
{% endif %}
{% if (not hasAccess) %}
<div class="container">
    {% partial 'page_protection_form' %}
</div>
{% endif %}


{% endput %}

{% partial 'layouts/base.htm' description="Simple 2 columns" %}
